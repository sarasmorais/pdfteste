<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LÃ­via & Mateus - Nosso Casamento</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #e8b4b8;
            --primary-dark: #d4919a;
            --primary-light: #f5d6d9;
            --accent-color: #f2c1c7;
            --text-color: #4a3b3c;
            --text-light: #8a7275;
            --white: #ffffff;
            --off-white: #faf6f7;
            --gray-light: #f0e6e8;
            --gray: #d9d0d2;
            --shadow: rgba(212, 145, 154, 0.1);
            --countdown-color: #c28285;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: "Poppins", sans-serif; color: var(--text-color); background-color: var(--off-white); line-height: 1.6; }
        h1, h2, h3, h4, h5, h6 { font-family: "Playfair Display", serif; font-weight: 500; }
        a { text-decoration: none; color: var(--primary-dark); transition: color 0.3s ease; }
        a:hover { color: var(--primary-color); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 2rem; color: var(--countdown-color); position: relative; padding-bottom: 1rem; font-weight: 400; }
        .section-title::after { content: ""; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 60px; height: 2px; background-color: var(--primary-color); }
        .btn-primary, .btn-secondary, .btn-map { display: inline-block; padding: 12px 28px; border-radius: 30px; font-weight: 500; text-align: center; cursor: pointer; transition: all 0.3s ease; border: none; font-size: 1rem; }
        .btn-primary { background-color: var(--primary-dark); color: var(--white); }
        .btn-primary:hover { background-color: var(--primary-color); color: var(--white); transform: translateY(-2px); box-shadow: 0 5px 15px var(--shadow); }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
        .btn-secondary { background-color: transparent; color: var(--primary-dark); border: 2px solid var(--primary-dark); }
        .btn-secondary:hover { background-color: var(--primary-light); color: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 5px 15px var(--shadow); }
        .btn-map { background-color: var(--primary-dark); color: var(--white); display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; font-size: 0.9rem; }
        .btn-map:hover { background-color: var(--primary-color); color: var(--white); box-shadow: 0 5px 15px var(--shadow); transform: translateY(-2px); }
        header { background-color: rgba(255, 255, 255, 1); transition: all 0.3s ease; position: fixed; width: 100%; z-index: 1000; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); padding: 15px 0; }
        header.scrolled-blur { background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 20px; position: relative; }
        header h1 { font-size: 1.8rem; color: var(--primary-dark); margin: 0; }
        .wedding-date { font-family: "Playfair Display", serif; font-style: italic; color: var(--text-light); font-size: 1rem; margin-left: 20px; }
        nav ul { display: flex; list-style: none; }
        nav ul li { margin-left: 30px; }
        nav ul li a { color: var(--text-color); font-weight: 500; position: relative; }
        nav ul li a::after { content: ""; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background-color: var(--primary-color); transition: width 0.3s ease; }
        nav ul li a:hover::after { width: 100%; }
        .hamburger-menu { display: none; cursor: pointer; }
        .hamburger-icon { width: 30px; height: 20px; position: relative; margin: 0px; transform: rotate(0deg); transition: .5s ease-in-out; cursor: pointer; }
        .hamburger-icon span { display: block; position: absolute; height: 3px; width: 100%; background: var(--primary-dark); border-radius: 9px; opacity: 1; left: 0; transform: rotate(0deg); transition: .25s ease-in-out; }
        .hamburger-icon span:nth-child(1) { top: 0px; }
        .hamburger-icon span:nth-child(2) { top: 8px; }
        .hamburger-icon span:nth-child(3) { top: 16px; }
        .hamburger-icon.open span:nth-child(1) { top: 8px; transform: rotate(135deg); }
        .hamburger-icon.open span:nth-child(2) { opacity: 0; left: -60px; }
        .hamburger-icon.open span:nth-child(3) { top: 8px; transform: rotate(-135deg); }
        .hero { height: 100vh; background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-color) 100%); position: relative; display: flex; align-items: center; justify-content: center; text-align: center; color: var(--text-color); }
        .hero-content { position: relative; z-index: 1; max-width: 800px; padding: 0 20px; }
        .hero h2 { font-size: 3.5rem; margin-bottom: 1.5rem; font-weight: 700; color: var(--primary-dark); }
        .hero p { font-size: 1.2rem; margin-bottom: 2rem; color: var(--text-light); }
        .countdown-section { padding: 100px 0; background-color: var(--off-white); text-align: center; }
        .countdown-title { color: var(--countdown-color); font-size: 2.8rem; margin-bottom: 1.5rem; font-weight: 400; }
        .countdown-intro { font-size: 1.2rem; margin-bottom: 2rem; color: var(--text-light); }
        .countdown { display: flex; justify-content: center; gap: 60px; margin: 2rem 0; }
        .countdown-item { margin: 0; min-width: 80px; background-color: transparent; padding: 0; border-radius: 0; box-shadow: none; }
        .countdown-item span { display: block; }
        .countdown-item span:first-child { font-size: 5rem; font-weight: 400; font-family: "Playfair Display", serif; color: var(--countdown-color); line-height: 1; margin-bottom: 5px; }
        .countdown-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-light); font-weight: 400; }
        .countdown-divider { width: 60px; height: 2px; background-color: var(--primary-light); margin: 0 auto 40px; }
        .rsvp { padding: 100px 0; background-color: var(--primary-light); }
        .rsvp-container { display: flex; flex-direction: column; gap: 40px; margin-top: 50px; }
        .rsvp-form-container { width: 100%; position: relative; }
        .rsvp-form { background-color: var(--white); padding: 40px; border-radius: 8px; box-shadow: 0 5px 15px var(--shadow); transition: opacity 0.5s ease, transform 0.5s ease; }
        .thank-you-message { background-color: var(--white); border-radius: 8px; box-shadow: 0 5px 15px var(--shadow); padding: 40px; text-align: center; display: none; opacity: 0; transition: opacity 0.5s ease; }
        .thank-you-message h3 { color: var(--countdown-color); margin-bottom: 20px; font-size: 2rem; font-weight: 400; }
        .thank-you-message p { color: var(--text-light); font-size: 1.1rem; margin-bottom: 10px; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px 15px; border: 1px solid var(--gray); border-radius: 5px; font-family: "Poppins", sans-serif; font-size: 1rem; transition: border-color 0.3s ease; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--primary-color); }
        .info-card { background-color: var(--white); border-radius: 8px; box-shadow: 0 5px 15px var(--shadow); overflow: hidden; transition: transform 0.3s ease; display: flex; flex-direction: column; }
        .info-section { padding: 25px 30px; }
        .date-section { border-bottom: 1px solid var(--gray-light); }
        .info-title { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; color: var(--countdown-color); }
        .info-title .material-symbols-outlined { color: var(--countdown-color); font-size: 1.3rem; }
        .info-title h3 { font-size: 1.5rem; font-weight: 500; margin: 0; color: var(--countdown-color); }
        .info-primary { margin-bottom: 5px; font-weight: 500; color: var(--text-color); }
        .info-secondary { color: var(--text-light); font-size: 0.95rem; }
        .map-section { position: relative; width: 100%; aspect-ratio: 1 / 1; background-color: #e0e0e0; overflow: hidden; border-top: 1px solid var(--gray-light); }
        .map-section iframe { width: 100%; height: 100%; border: 0; display: block; }
        .map-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        footer { padding: 60px 0; background-color: var(--primary-dark); color: var(--white); text-align: center; }
        .footer-title { font-size: 2.5rem; margin-bottom: 10px; }
        .footer-date { font-family: "Playfair Display", serif; font-style: italic; margin-bottom: 20px; }
        .footer-message { max-width: 500px; margin: 0 auto; }
        .loading-spinner { width: 20px; height: 20px; border: 2px solid transparent; border-top: 2px solid var(--white); border-radius: 50%; animation: spin 1s linear infinite; display: inline-block; margin-right: 8px; vertical-align: middle; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .fade-in { animation: fadeIn 1s ease-in-out; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .slide-up { animation: slideUp 0.8s ease-out; }
        section { opacity: 0; transition: opacity 1s ease; }
        section.visible { opacity: 1; }
        @media (min-width: 992px) { .rsvp-container { flex-direction: row; align-items: stretch; } .rsvp-form-container { flex: 2; } .info-card { flex: 1; display: flex; flex-direction: column; } .map-section { flex-grow: 1; } }
        @media (max-width: 768px) { .hamburger-menu { display: block; z-index: 1001; } nav { position: fixed; top: 0; right: -100%; width: 70%; height: 100vh; background-color: var(--white); box-shadow: -5px 0 15px rgba(0,0,0,0.1); transition: right 0.3s ease; z-index: 1000; display: flex; align-items: center; justify-content: center; } nav.active { right: 0; } nav ul { flex-direction: column; align-items: center; } nav ul li { margin: 20px 0; } .hero h2 { font-size: 2.5rem; } .countdown { gap: 30px; } .countdown-item { min-width: 60px; } .countdown-item span:first-child { font-size: 3.5rem; } .section-title { font-size: 2rem; } .map-section { min-height: 250px; aspect-ratio: unset; } }
        @media (max-width: 576px) { .countdown { flex-wrap: nowrap; gap: 15px; justify-content: space-around; } .countdown-item { min-width: auto; text-align: center; } .countdown-item span:first-child { font-size: 2.5rem; } .countdown-label { font-size: 0.6rem; } .rsvp-form { padding: 20px; } .thank-you-message { padding: 30px 20px; } .header-content { flex-wrap: wrap; justify-content: center; text-align: center; } header h1 { font-size: 1.5rem; width: 100%; margin-bottom: 5px; } .wedding-date { margin-left: 0; font-size: 0.9rem; width: 100%; } .hamburger-menu { position: absolute; top: 50%; right: 20px; transform: translateY(-50%); } nav { width: 80%; } .info-section { padding: 20px; } }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <h1>LÃ­via & Mateus</h1>
            <p class="wedding-date">30 de Outubro de 2025</p>
            <div class="hamburger-menu">
                <div class="hamburger-icon" id="hamburger-icon">
                    <span></span><span></span><span></span>
                </div>
            </div>
            <nav id="nav-menu">
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#countdown">Contagem Regressiva</a></li>
                    <li><a href="#confirmar">Confirmar PresenÃ§a</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero">
        <div class="hero-content">
            <h2>Vamos nos casar!</h2>
            <p>GostarÃ­amos de compartilhar este momento especial com vocÃª</p>
            <a href="#confirmar" class="btn-primary">Confirmar PresenÃ§a</a>
        </div>
    </section>

    <section id="countdown" class="countdown-section">
        <div class="container">
            <h2 class="countdown-title">Contagem Regressiva</h2>
            <div class="countdown-divider"></div>
            <p class="countdown-intro">Faltam para o nosso grande dia:</p>
            <div class="countdown" id="countdown-timer">
                <div class="countdown-item"><span id="days">00</span><span class="countdown-label">Dias</span></div>
                <div class="countdown-item"><span id="hours">00</span><span class="countdown-label">Horas</span></div>
                <div class="countdown-item"><span id="minutes">00</span><span class="countdown-label">Minutos</span></div>
                <div class="countdown-item"><span id="seconds">00</span><span class="countdown-label">Segundos</span></div>
            </div>
        </div>
    </section>

    <section id="confirmar" class="rsvp">
        <div class="container">
            <h2 class="section-title">Confirme sua PresenÃ§a</h2>
            <div class="rsvp-container">
                <div class="rsvp-form-container">
                    <form id="rsvp-form" class="rsvp-form">
                        <div class="form-group"><label for="name">Nome Completo</label><input type="text" id="name" name="nome" required></div>
                        <div class="form-group"><label for="email">E-mail</label><input type="email" id="email" name="email" required></div>
                        <div class="form-group"><label for="phone">Telefone</label><input type="tel" id="phone" name="telefone" required></div>
                        <div class="form-group"><label for="guests">NÃºmero de acompanhantes</label><select id="guests" name="acompanhantes"><option value="0">Apenas eu</option><option value="1">1 acompanhante</option><option value="2">2 acompanhantes</option><option value="3">3 acompanhantes</option></select></div>
                        <div class="form-group"><label for="message">Mensagem para os noivos (opcional)</label><textarea id="message" name="mensagem" rows="4"></textarea></div>
                        <button type="submit" id="submit-button" class="btn-primary">Confirmar PresenÃ§a</button>
                    </form>
                    <div id="thank-you-message" class="thank-you-message"></div>
                </div>
                <div class="info-card">
                    <div class="info-section date-section">
                        <div class="info-title"><span class="material-symbols-outlined">calendar_month</span><h3>Data e Hora</h3></div>
                        <p class="info-primary">30 de Outubro de 2025</p><p class="info-secondary">CerimÃ´nia Ã s 16:00</p>
                    </div>
                    <div class="info-section location-section">
                        <div class="info-title"><span class="material-symbols-outlined">location_on</span><h3>Local da CerimÃ´nia</h3></div>
                        <p class="info-primary">EspaÃ§o Jardim das Flores</p><p class="info-secondary">Rua das Flores, 123 - Jardim Primavera</p>
                    </div>
                    <div class="map-section">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3981.306321996998!2d-38.52595768524086!3d-3.742196997273758!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7c7491de5330c0f%3A0x250610777842c204!2sPra%C3%A7a%20do%20Ferreira!5e0!3m2!1spt-BR!2sbr!4v1620000000000!5m2!1spt-BR!2sbr" 
                            width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                        <div class="map-overlay">
                             <a href="https://maps.app.goo.gl/YOUR_Maps_SHARE_LINK" target="_blank" class="btn-map"> <span class="material-symbols-outlined">map</span> Ver no mapa
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <h2 class="footer-title">LÃ­via & Mateus</h2><p class="footer-date">30.10.2025</p>
            <p class="footer-message">Agradecemos por fazer parte deste momento tÃ£o especial!</p>
        </div>
    </footer>

    <script>
    // Countdown Timer
    const weddingDate = new Date("October 30, 2025 16:00:00").getTime();
    const countdownInterval = setInterval(() => {
        const now = new Date().getTime();
        const distance = weddingDate - now;
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        const daysEl = document.getElementById("days");
        const hoursEl = document.getElementById("hours");
        const minutesEl = document.getElementById("minutes");
        const secondsEl = document.getElementById("seconds");

        if (daysEl) daysEl.textContent = days.toString().padStart(2, "0");
        if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, "0");
        if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, "0");
        if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, "0");

        if (distance < 0) {
            clearInterval(countdownInterval);
            const countdownTimerElement = document.getElementById("countdown-timer");
            if (countdownTimerElement) {
                countdownTimerElement.innerHTML = "<h3>Nosso grande dia chegou!</h3>";
            }
        }
    }, 1000);

    // Main JavaScript
    document.addEventListener("DOMContentLoaded", () => {
        const header = document.querySelector("header");
        if (header) {
            window.addEventListener("scroll", () => {
                header.classList.toggle("scrolled-blur", window.scrollY > 10);
            });
        }

        const hamburgerIcon = document.getElementById("hamburger-icon");
        const navMenu = document.getElementById("nav-menu");
        if (hamburgerIcon && navMenu) {
            hamburgerIcon.addEventListener("click", function () {
                this.classList.toggle("open");
                navMenu.classList.toggle("active");
            });
        }
        
        const navLinks = document.querySelectorAll("nav ul li a");
        navLinks.forEach((link) => {
            link.addEventListener("click", () => {
                if (hamburgerIcon && navMenu) {
                    hamburgerIcon.classList.remove("open");
                    navMenu.classList.remove("active");
                }
            });
        });

        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
            anchor.addEventListener("click", function (e) {
                e.preventDefault();
                const targetId = this.getAttribute("href");
                try {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const headerEl = document.querySelector("header");
                        const headerHeight = headerEl ? headerEl.offsetHeight : 0;
                        const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight;
                        window.scrollTo({ top: targetPosition, behavior: "smooth" });
                    }
                } catch (error) {
                    console.warn("Elemento para scroll suave nÃ£o encontrado:", targetId, error);
                }
            });
        });

        function loadJsPDF() {
            return new Promise((resolve, reject) => {
                if (window.jspdf && window.jspdf.jsPDF) { resolve(window.jspdf); return; }
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
                script.async = true;
                script.onload = () => {
                    setTimeout(() => {
                        if (window.jspdf && window.jspdf.jsPDF) { resolve(window.jspdf); }
                        else { console.warn('jsPDF CDN principal falhou. Tentando fallback.'); loadFallbackJsPDF(resolve, reject); }
                    }, 100);
                };
                script.onerror = () => { console.error('Falha CDN principal. Tentando fallback.'); loadFallbackJsPDF(resolve, reject); };
                document.head.appendChild(script);
            });
        }

        function loadFallbackJsPDF(resolve, reject) {
            const script2 = document.createElement('script');
            script2.src = 'https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js';
            script2.async = true;
            script2.onload = () => {
                setTimeout(() => {
                    if (window.jspdf && window.jspdf.jsPDF) { resolve(window.jspdf); }
                    else { reject(new Error('jsPDF fallback CDN falhou.')); }
                }, 100);
            };
            script2.onerror = () => { reject(new Error('Falha ambas CDNs jsPDF.')); };
            document.head.appendChild(script2);
        }

        // FUNÃÃO generatePDF CORRIGIDA
        async function generatePDF(formDataObj) {
            try {
                console.log("Dados recebidos para PDF:", formDataObj);
                const jsPDFNamespace = await loadJsPDF();
                const { jsPDF } = jsPDFNamespace;
                const doc = new jsPDF(); 

                // Cores
                const primaryColor = [232, 180, 184]; 
                const primaryDark = [212, 145, 154];  
                const textColor = [74, 59, 60];       
                const bgColor = [250, 246, 247];      
                const accentColor = [242, 193, 199];   
                const whiteColor = [255, 255, 255];
                const countdownColor = [194, 130, 133];

                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const margin = 15;
                const contentWidth = pageWidth - (margin * 2);

                // Fundo da pÃ¡gina
                doc.setFillColor(...bgColor);
                doc.rect(0, 0, pageWidth, pageHeight, "F");

                let currentY = 0;

                // CABEÃALHO
                doc.setFillColor(...primaryDark); 
                doc.rect(0, 0, pageWidth, 35, "F");
                
                currentY = 22;
                doc.setFontSize(24); 
                doc.setTextColor(...whiteColor);
                doc.setFont("helvetica", "bold");
                doc.text("LÃ­via & Mateus", pageWidth / 2, currentY, { align: "center" });
                
                currentY = 50;
                doc.setFontSize(14);
                doc.setTextColor(...countdownColor); 
                doc.setFont("helvetica", "italic");
                doc.text("VocÃª estÃ¡ convidado para celebrar conosco!", pageWidth / 2, currentY, { align: "center" });
                
                currentY += 15;
                doc.setFontSize(18);
                doc.setTextColor(...primaryDark);
                doc.setFont("helvetica", "bold");
                doc.text("30 de Outubro de 2025", pageWidth / 2, currentY, { align: "center" });
                
                currentY += 10;
                doc.setDrawColor(...primaryColor);
                doc.setLineWidth(1);
                doc.line(margin + 50, currentY, pageWidth - margin - 50, currentY);
                
                currentY += 25;

                // TÃTULO DA CONFIRMAÃÃO
                doc.setFontSize(16);
                doc.setTextColor(...countdownColor);
                doc.setFont("helvetica", "bold");
                doc.text("ConfirmaÃ§Ã£o de PresenÃ§a Recebida", pageWidth / 2, currentY, { align: "center" });
                
                currentY += 20;

                // CAIXA DE INFORMAÃÃES DO CONVIDADO
                const boxHeight = 70;
                doc.setFillColor(...whiteColor);
                doc.setDrawColor(...primaryColor);
                doc.setLineWidth(0.5);
                doc.roundedRect(margin, currentY, contentWidth, boxHeight, 3, 3, "FD");

                let textY = currentY + 15;
                const labelX = margin + 15;
                const valueX = margin + 70;

                // Nome
                doc.setFontSize(11);
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("Convidado:", labelX, textY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                doc.text(String(formDataObj.nome || "N/A"), valueX, textY);
                
                textY += 12;

                // Email
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("Email:", labelX, textY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                doc.text(String(formDataObj.email || "N/A"), valueX, textY);
                
                textY += 12;

                // Telefone
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("Telefone:", labelX, textY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                doc.text(String(formDataObj.telefone || "N/A"), valueX, textY);
                
                textY += 12;

                // Acompanhantes
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("Acompanhantes:", labelX, textY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                const acompanhantesText = formDataObj.acompanhantes === "0" ? "Apenas eu" : `${formDataObj.acompanhantes || '0'} pessoa(s)`;
                doc.text(acompanhantesText, valueX, textY);

                // Mensagem (se houver)
                if (formDataObj.mensagem && formDataObj.mensagem.trim() !== "") {
                    textY += 12;
                    doc.setFont("helvetica", "bold"); 
                    doc.setTextColor(...primaryDark);
                    doc.text("Mensagem:", labelX, textY);
                    
                    textY += 8;
                    doc.setFontSize(10);
                    doc.setFont("helvetica", "normal"); 
                    doc.setTextColor(...textColor);
                    const messageLines = doc.splitTextToSize(String(formDataObj.mensagem), contentWidth - 80);
                    doc.text(messageLines, valueX, textY);
                }

                currentY += boxHeight + 25;

                // DETALHES DO EVENTO
                const eventBoxHeight = 65;
                doc.setFillColor(...accentColor);
                doc.setDrawColor(...primaryColor); 
                doc.setLineWidth(1);
                doc.roundedRect(margin, currentY, contentWidth, eventBoxHeight, 4, 4, "FD");

                let eventY = currentY + 15;
                doc.setFontSize(16); 
                doc.setTextColor(...countdownColor); 
                doc.setFont("helvetica", "bold");
                doc.text("Detalhes do Evento", pageWidth / 2, eventY, { align: "center" });
                
                eventY += 8;
                doc.setDrawColor(...primaryColor); 
                doc.setLineWidth(0.5);
                doc.line(pageWidth / 2 - 30, eventY, pageWidth / 2 + 30, eventY);
                
                eventY += 15;

                // Primeira linha de detalhes
                const col1X = margin + 15;
                const col2X = pageWidth / 2 + 10;

                doc.setFontSize(11);
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("Data:", col1X, eventY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                doc.text("30 de Outubro de 2025", col1X + 25, eventY);

                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("Local:", col2X, eventY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                doc.text("EspaÃ§o Jardim das Flores", col2X + 25, eventY);

                eventY += 12;

                // Segunda linha de detalhes
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("HorÃ¡rio:", col1X, eventY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                doc.text("16:00", col1X + 25, eventY);
                
                doc.setFont("helvetica", "bold"); 
                doc.setTextColor(...primaryDark);
                doc.text("EndereÃ§o:", col2X, eventY);
                doc.setFont("helvetica", "normal"); 
                doc.setTextColor(...textColor);
                const addressLines = doc.splitTextToSize("Rua das Flores, 123 - Jardim Primavera", 80);
                doc.text(addressLines, col2X + 25, eventY);

                currentY += eventBoxHeight + 25;

                // MENSAGEM FINAL
                const finalBoxHeight = 30;
                doc.setFillColor(...primaryColor);
                doc.roundedRect(margin + 10, currentY, contentWidth - 20, finalBoxHeight, 3, 3, "F");
                
                doc.setFontSize(11); 
                doc.setTextColor(...whiteColor); 
                doc.setFont("helvetica", "italic");
                doc.text("Agradecemos por confirmar sua presenÃ§a!", pageWidth / 2, currentY + 12, { align: "center" });
                doc.text("Estamos ansiosos para celebrar este momento com vocÃª.", pageWidth / 2, currentY + 22, { align: "center" });
                
                // RODAPÃ
                const footerY = pageHeight - 15;
                doc.setDrawColor(...primaryDark); 
                doc.setLineWidth(0.5);
                doc.line(margin, footerY - 5, pageWidth - margin, footerY - 5);
                
                doc.setFontSize(9); 
                doc.setTextColor(...primaryDark); 
                doc.setFont("helvetica", "normal");
                doc.text("LÃ­via & Mateus â¥ 30.10.2025", pageWidth / 2, footerY, { align: "center" });
                
                console.log("PDF gerado com sucesso!");
                const safeGuestName = String(formDataObj.nome || "Convidado").replace(/[^\w\sÃ-Ãº]/gi, '').replace(/\s+/g, "_");
                const fileName = `Confirmacao_Casamento_Livia_e_Mateus_${safeGuestName}_30-10-2025.pdf`;
                doc.save(fileName);

                return true;
            } catch (error) {
                console.error("Erro ao gerar PDF:", error);
                alert("Ocorreu um erro ao gerar o PDF. Por favor, tente novamente.");
                throw error;
            }
        }

        const rsvpForm = document.getElementById("rsvp-form");
        const thankYouMessageContainer = document.getElementById("thank-you-message"); 
        const submitButton = document.getElementById("submit-button");

        if (rsvpForm && thankYouMessageContainer && submitButton) {
            rsvpForm.addEventListener("submit", async (e) => {
                e.preventDefault();
                const originalText = submitButton.textContent;
                submitButton.innerHTML = '<span class="loading-spinner"></span>Enviando...';
                submitButton.disabled = true;
                const formData = new FormData(rsvpForm);
                const formDataObj = Object.fromEntries(formData.entries());

                try {
                    const response = await fetch("https://api.sheetmonkey.io/form/ri6NRsJ9mYsHBm1YZvXR5y", {
                        method: "POST",
                        headers: { Accept: "application/json", "Content-Type": "application/json" },
                        body: JSON.stringify(formDataObj),
                    });
                    if (!response.ok) {
                        let errorData = { message: 'Erro ao enviar dados para a planilha.' };
                        try { errorData = await response.json(); } catch (jsonError) { /* Usar msg padrÃ£o */ }
                        throw new Error(errorData.message || 'Erro ao enviar dados. Status: ' + response.status);
                    }

                    rsvpForm.style.opacity = "0";
                    rsvpForm.style.transform = "translateY(20px)";
                    setTimeout(() => {
                        rsvpForm.style.display = "none";
                        thankYouMessageContainer.innerHTML = `
                            <h3>Obrigado por confirmar sua presenÃ§a, ${formDataObj.nome}!</h3>
                            <p><strong>Email:</strong> ${formDataObj.email}</p>
                            <p><strong>Telefone:</strong> ${formDataObj.telefone}</p>
                            <p><strong>Acompanhantes:</strong> ${formDataObj.acompanhantes === "0" ? "Apenas vocÃª" : formDataObj.acompanhantes + " pessoa(s)"}</p>
                            ${formDataObj.mensagem ? `<p><strong>Mensagem:</strong> ${formDataObj.mensagem}</p>` : ""}
                            <button id="download-pdf" class="btn-primary" style="margin-top: 20px;">ð Baixar ConfirmaÃ§Ã£o em PDF</button>`;
                        thankYouMessageContainer.style.display = "block";
                        void thankYouMessageContainer.offsetWidth; 
                        thankYouMessageContainer.style.opacity = "1";

                        const downloadButton = document.getElementById("download-pdf");
                        if(downloadButton) {
                            downloadButton.addEventListener("click", async () => {
                                const originalDownloadText = downloadButton.textContent;
                                downloadButton.innerHTML = '<span class="loading-spinner"></span>Gerando PDF...';
                                downloadButton.disabled = true;
                                try {
                                    await generatePDF(formDataObj);
                                } catch (error) { 
                                    console.error("Erro no download do PDF:", error);
                                }
                                finally {
                                    downloadButton.textContent = originalDownloadText;
                                    downloadButton.disabled = false;
                                }
                            });
                        }
                    }, 500);
                } catch (error) {
                    console.error("Erro ao enviar o formulÃ¡rio:", error);
                    alert(`Ocorreu um erro ao enviar o formulÃ¡rio: ${error.message}. Por favor, tente novamente.`);
                    submitButton.textContent = originalText;
                    submitButton.disabled = false;
                }
            });
        }

        const sections = document.querySelectorAll("section");
        const revealPoint = 150;
        function checkReveal() {
            const windowHeight = window.innerHeight;
            sections.forEach((section) => {
                const sectionTop = section.getBoundingClientRect().top;
                if (sectionTop < windowHeight - revealPoint) {
                    section.classList.add("visible");
                }
            });
        }
        if (sections.length > 0) { checkReveal(); window.addEventListener("scroll", checkReveal); }
    });
    </script>
</body>
</html>
